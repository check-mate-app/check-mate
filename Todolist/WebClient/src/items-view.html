<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="shared-styles.html">

<dom-module id="items-view">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }

    </style>

    <!-- route -->
    <app-route
        route="[[route]]"
        pattern="/:listid"
        data="{{routeData}}"></app-route>

    <!-- api -->

    <iron-ajax
      id="getItems"
      auto=""
      url="/api/lists/[[routeData.listid]]/items"
      method="get"
      handle-as="json"
      last-response="{{items}}">
    </iron-ajax>

    <!-- /api -->

    <!-- content: -->
    <div class="general-list">
      <template is="dom-repeat" items="[[items]]">
      <paper-icon-item>
        <!-- <iron-icon icon="mdi:checkbox" item-icon slot="item-icon"></iron-icon> -->
        <template is="dom-if" if="{{!item.done}}">
          <paper-checkbox slot="item-icon"></paper-checkbox>
        </template>
        <template is="dom-if" if="{{item.done}}">
          <paper-checkbox slot="item-icon" checked></paper-checkbox>
        </template>

        <paper-item-body>
          <div>[[item.content]]</div>
        </paper-item-body>
      </paper-icon-item>
    </template>
  </div>
    <!-- /content -->
  </template>

  <script>
    class ItemsView extends Polymer.Element {
      static get is() { return 'items-view'; }

      static get properties() { return {
        listid: Object,
        route: Object,
        routeData: Object,
      }}

    }

    window.customElements.define(ItemsView.is, ItemsView);
  </script>
</dom-module>
